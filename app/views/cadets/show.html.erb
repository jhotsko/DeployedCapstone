<%= javascript_include_tag "sort_table" %>

<head>
  <style>
    span{
      font-size: 24px;
    }
    
    .column {
      float: left;
      width: 20%;
    }
    
    /* Clear floats after the columns */
    .row:after {
      content: "";
      display: table;
      clear: both;
    }
  </style>
</head>
<p id="notice"><%= notice %></p>

<!--Cadet Information-->

<h2 class = "display-4" style="margin-bottom:20px;">Cadet <%= @cadet.lastName %></h2>


<div style="text-align: center;">
  <div  style="display: inline-block; text-align: left;">
    <p>
      <strong>Last Name:</strong>
      <%= @cadet.lastName %>
    </p>

    <p>
      <strong>First Name:</strong>
      <%= @cadet.firstName %>
    </p>

    <p>
      <strong>Email:</strong>
      <%= @cadet.email %>
    </p>

    <p>
      <strong>Phone Number:</strong>
      <%= "(#{(@cadet.phoneNumber.to_s)[0, 3]}) #{(@cadet.phoneNumber.to_s)[3, 3]}-#{(@cadet.phoneNumber.to_s)[6, 4]}" %>
    </p>

    <p>
      <strong>School:</strong>
      <%= @cadet.school %>
    </p>

    <p>
      <strong>Position:</strong>
      <%= @cadet.position %>
    </p>

    <p>
      <strong>Course:</strong>
      <%= @cadet.course %>
    </p>
    
    <p>
      <strong>Grad Year:</strong>
      <%= @cadet.gradYear %>
    </p>

    <p>
      <strong>Flight:</strong>
      <%= @cadet.flight %>
    </p>
  </div>
</div>


<% if (@cadet == Cadet.find_by(id: session[:cadet_id])) || (Cadet.find_by(id: session[:cadet_id]).position != "Cadet") %>  
  <!--Cadet Attendance Table-->
  <%@ord_attendance = @cadet.attendances%>
  
  <h2 class="font-weight-light" style = "text-align: left; margin-top: 20px;">Attendance Records</h2>
  
  <div class="row">
    <div class="column"><p><strong>Overall Attendance: </strong><%= @total_percent %>%</p> </div>
    <div class="column"><p><strong>LLAB Attendance: </strong><%= @LLAB_percent%></p> </div>
    <div class="column"><p><strong>LLAB Attendance: </strong><%= @PT_percent %>%</p> </div>
  </div>
  
  
  <table class="table table-striped table-bordered", id = "table">
    <thead class="thead-dark">
      <tr>
        <th scope="col", onclick="sortTable(0)", onMouseOver="this.style.color='yellow'", onMouseOut="this.style.color='#FFF'">Event</th>
        <th scope="col", onclick="sortTable(1)", onMouseOver="this.style.color='yellow'", onMouseOut="this.style.color='#FFF'">Status</th>
      </tr>
    </thead>
    <tbody>
      <% @ord_attendance.each do |attendance| %>
        <tr>
          <td><%= link_to "#{attendance.event.eventDate}", attendance.event %></td>
          <% if attendance.attended === "Absent"%>
            <td class = "bg-danger text-white"><%= attendance.attended %></td>
          <% elsif attendance.attended === "Present" %>
             <td  class ="bg-success text-white"><%= attendance.attended %></td>
          <% elsif attendance.attended === "Tardy" %>
             <td  class ="bg-warning text-black"><%= attendance.attended %></td>
          <% else %>
             <td><%= attendance.attended %></td>
          <% end %>            
        </tr>
      <% end %>
    </tbody>
  </table>
  
  <div>
    <%= link_to 'Edit', edit_cadet_path(@cadet), :class => "btn btn-secondary btn-info btn-sm"%>
  
    <%= link_to 'Remove', @cadet, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-secondary btn-danger btn-sm"  %> 
    <br>
  </div>


<br>

<!-- Back to Top Button -->
<button onclick="topFunction()" type="button" class="btn btn-dark">Back to Top</button>
<script>
  function topFunction() {
    document.body.scrollTop = 0; // For Safari
    document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
  }
</script>
<% end %>